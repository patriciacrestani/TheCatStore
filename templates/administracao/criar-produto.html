{% extends 'base.html' %}

{% load static %}

{% block content %}

	<div class="container my-5">
        <div class="row">
            <div class="col-12">
                <h4 class="mb-2">Cadastro de Produtos</h4>
                <hr class="mb-4">
            </div>
        </div>

        {% if messages %}
            <div class="row mb-3">
                <div class="col-12">
                    {% for message in messages %}
                        <ul class="list-group rounded {{ message.tags }}">
                            {# Supondo a utilização de apenas info e danger #}
                            <li style="padding-top: 7px; padding-bottom: 7px;"
                                class="list-group-item list-group-item-{% if message.tags == 'info' %}info{% else %}danger{% endif %}">
                                {{ message }}
                            </li>
                        </ul>
                    {% endfor %}
                </div>
            </div>
        {% endif %}



        <form id="form" action ="{% url 'criarproduto' %}" method ="POST" novalidate enctype="multipart/form-data">
            <div class="form-group row" style="margin-bottom: 10px;" >
                <label class="col-lg-2 col-form-label font-weight-bold">Nome</label>
                <div class="col-lg-10">
                    {{ form.nome }}
                    {% if form.nome.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.nome.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Categoria</label>
                <div class="col-lg-10">
                    {{ form.categoria }}
                    {% if form.categoria.errors %}
                        <div class="alert alert-danger mb-0"
                             style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.categoria.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Descrição</label>
                <div class="col-lg-10">
                    {{ form.descricao }}
                    {% if form.descricao.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.descricao.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Preço</label>
                <div class="col-lg-10">
                    {{ form.preco }}
                    {% if form.preco.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.preco.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Quantidade</label>
                <div class="col-lg-10">
                    {{ form.quantidade }}
                    {% if form.quantidade.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.quantidade.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Marca</label>
                <div class="col-lg-10">
                    {{ form.marca }}
                    {% if form.marca.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.marca.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Fabricante</label>
                <div class="col-lg-10">
                    {{ form.fabricante }}
                    {% if form.fabricante.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.fabricante.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Dimensões</label>
                <div class="col-lg-10">
                    {{ form.dimensoes }}
                    {% if form.dimensoes.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.dimensoes.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Peso</label>
                <div class="col-lg-10">
                    {{ form.peso }}
                    {% if form.peso.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.peso.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Garantia</label>
                <div class="col-lg-10">
                    {{ form.garantia }}
                    {% if form.garantia.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.garantia.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Cor</label>
                <div class="col-lg-10">
                    {{ form.cor }}
                    {% if form.cor.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.cor.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Material</label>
                <div class="col-lg-10">
                    {{ form.material }}
                    {% if form.material.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.material.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-bottom: 10px;">
                <label class="col-lg-2 col-form-label font-weight-bold">Imagem</label>
                <div class="col-lg-10">
                    {{ form.imagem }}
                    {% if form.imagem.errors %}
                        <div class="alert alert-danger mb-0" style="padding-top: 2px; padding-bottom: 2px;">
                            {% for error in form.imagem.errors %}
                                <small>{{ error }}</small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-group row" style="margin-top: 20px;">
                <div class="col-lg-10 offset-lg-2">
                    {% csrf_token %}
                    <button id="botao" type="button" class="btn btn-primary">
                        {% if form.produto_id.value %}
                            Alterar
                        {% else %}
                            Cadastrar
                        {% endif %}
                    </button>
                </div>
            </div>
        </form>
    </div>
{% endblock %}


{% block domready %}
    $("#botao").click(function() {
        $("#form").append('{{ form.produto_id }}')
        $("#form").submit()
    })
{% endblock %}